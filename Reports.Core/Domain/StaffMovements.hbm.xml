<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="Reports.Core.Domain" assembly="Reports.Core">
  <class name="StaffMovements">
    <!--Стандартные поля заявки-->
    <id name="Id">
      <generator class="native" />
    </id>
    <version name="Version" column= "Version"/>
    <property name="CreateDate" not-null="true"/>
    <property name="SendDate" not-null="false"/>
    <property name="DeleteDate" not-null="false"/>
    <property name="RejectDate" not-null="false"/>
    <property name="SendTo1C" not-null="false"/>
    <property name="Number"  not-null="false"/>
    
    <many-to-one name="Type" class="refStaffMovementsType" column="Type" foreign-key="FK_StaffMovements_Type" not-null="true"/>
    <many-to-one name="Status" class="refStaffMovementsStatus" column="Status" foreign-key="FK_StaffMovements_Status" not-null="false"/>
    <many-to-one name="User" class="User" column="UserId" foreign-key="FK_StaffMovements_User" not-null="false"/>
    <many-to-one name="Creator" class="User" column="CreatorId" foreign-key="FK_StaffMovements_Creator" not-null="true"/>
    <many-to-one name="RejectReason" class="refStaffMovementsRejectReason" column="RejectReason" foreign-key="FK_StaffMovements_RejectReason" not-null="false"/>
    <!--Поля заявки-->
    <many-to-one name="SourceDepartemnt" class="Department" column="SourceDepartemntId" foreign-key="FK_StaffMovements_SourceDepartment" not-null="true"/>
    <many-to-one name="TargetDepartemnt" class="Department" column="TargetDepartemntId" foreign-key="FK_StaffMovements_TargetDepartment" not-null="true"/>
    <many-to-one name="MoveType" class="refStaffMovementsMoveType" column="MoveType" foreign-key="FK_StaffMovements_MoveType" not-null="true"/>
    <many-to-one name="Data" class="StaffMovementsData" column="DataId" foreign-key="FK_StaffMovements_Data" not-null="true"/>
    <bag name="Docs" lazy="true" inverse="true" cascade="all-delete-orphan">
      <key column="RequestId" foreign-key="FK_StaffMovementsDocs_Request"/>
      <one-to-many class="StaffMovementsDocs"/>
    </bag>
    
  </class>
</hibernate-mapping>
