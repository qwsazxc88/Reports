@using Reports.Presenters.UI.ViewModel
@using WebMvc.Helpers
@using Reports.Core.Dto;
@model DocumentMovementsListModel
@{
    ViewBag.Title = "Документооборот";
 }
@Html.AddStyles("../../Content/artem.css",
                "../../Content/uigrid/ui-grid.min.css")          
@Html.AddScripts("../../Scripts/jQueryUIDefaults.js", 
                "../../Scripts/angular.min.js", 
                "../../Scripts/uigrid/ui-grid.min.js", 
                "../../Scripts/angular-modules/DataService.js",
                "../../Scripts/DocumentMovements/DocumentMovementsList.js")
@using (Html.BeginBlock("UI-grid", "ng-app='DocumentMovementsList'", "ng-controller='DocumentMovementsListController'"))
{
    using (Html.BeginForm("DocumentMovementsList", "DocumentMovements", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {

        using (Html.BeginBlock("filter-wrap"))
        {
        @Html.CreateHeader((string)ViewBag.Title);
        @Html.CreateField(m => m.Number, new Dictionary<string, object> { { "ng-model", "Model.Number" } })
        @Html.CreateField(m => m.UserName, new Dictionary<string, object> { { "ng-model", "Model.UserName" } })
        @Html.CreateField(m => m.SenderName, new Dictionary<string, object> { { "ng-model", "Model.SenderName" } })
        @Html.CreateField(m => m.ReceiverName, new Dictionary<string, object> { { "ng-model", "Model.ReceiverName" } })
        @Html.CreateField("{0:dd.MM.yyyy}", m => m.BeginDate, new Dictionary<string, object> { { "class", "DatePicker" }, { "ng-model", "Model.BeginDate" } }, true)
        @Html.CreateField("{0:dd.MM.yyyy}", m => m.EndDate, new Dictionary<string, object> { { "class", "DatePicker" }, { "ng-model", "Model.EndDate" } }, true)
        }

        using (Html.BeginBlock("toolbar ui-widget-header ui-corner-all"))
        {
        @Html.CreateButton(false, true, "Выбрать", new Dictionary<string, object> { { "ng-click", "'GetDocuments'" } }, "")
        @Html.CreateButton(false, true, "Очистить", new Dictionary<string, object> { { "ng-click", "'ClearForm'" } }, "")
        @Html.CreateLink("/DocumentMovements/DocumentMovementsEdit/0", "Создать заявку", "button")
        }
        @(Html.ngGrid<DocumentMovementsDto>("Model.Documents"))
     @*<div ui-grid="{ data: Model.Documents, enableSorting: true, columnDefs:[{field:'Id', displayName:'Номер' }, {field:'User', displayName:'ФИО сотрудника', enableFiltering:true, enableSorting:true, type :'string' }]}"></div>*@
    }
}